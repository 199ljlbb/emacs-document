#+TITLE: sunrise-and-sunsets-in-emacs
#+AUTHOR: lujun9972
#+URL: http://www.jmdeldin.com/posts/2016/sunrise-and-sunsets-in-emacs.html 
#+TAGS: raw
#+DATE: [2016-11-24 四 11:41]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:nil


As days get shorter and shorter, I find myself wondering when the sun will set
at whichever skatepark I plan on visiting. In the past, Googling “sunrise|
sunset <location>” sufficed, but I wanted something that ran locally and
automatically on my Linux machine, and like any Emacs user, I wanted it to run
inside Emacs. As it turns out, this functionality is already built into Emacs’
diary feature.

* The finished product

[[http://www.jmdeldin.com/images/emacs_sunrise.png]]
Screensh The Pacific Northwest certainly has its perks, but short, gray days
are not one of them.

* Steps

 1. If you haven’t set Org-mode up already, you should edit your ~/.emacs.d/
    init.el and add the following lines:
   
    #+BEGIN_SRC emacs-lisp
      (setq org-directory "/tmp/org")
      (setq org-agenda-files (file-expand-wildcards org-directory))
    #+END_SRC

 2. Specify your latitude and longitude in the next chunk. You can use [[http://maps.google.com][Google]]
    [[http://maps.google.com][Maps]] or [[http://www.latlong.net/][LatLong]] to find out:
   
    #+BEGIN_SRC emacs-lisp
      (setq calendar-latitude 47.9790)
      (setq calendar-longitude -122.2021)
      (setq calendar-location-name "Everett, WA")
    #+END_SRC

 3. Modify one of your Org agenda files specified in #1, e.g., /tmp/test.org:
   
    #+BEGIN_SRC org
      ,* Calendar
      %%(diary-sunrise-sunset)
    #+END_SRC

 4. Save/reload your init file, then execute M-x org-agenda, press a. Tip: To
    see the sunrise/sunset times for the entire year (and to get depressed
    about winter): M-x org-agenda RET a v y

#+TITLE: tutorial-introduction-to-searching-in-emacs
#+URL: https://emacs-doctor.com/tutorial-introduction-searching-emacs.html  
#+AUTHOR: lujun9972
#+TAGS: raw
#+DATE: [2016-12-04 日 20:54]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:nil


首先,输入 =C-h i= 进入Info buffer. 按下 =d= 跳转到Info文档的最顶层,然后再按下 =M-<= 跳转到buffer的起始位置.

输入 =C-s lisp= 开始增量搜索 "lisp".

[[https://emacs-doctor.com/img/2016-11-07-emacs-search-lisp.png]]

按下回车会终止搜索,同时取消对匹配内容的高亮.

使用 =C-r= 可以实现向后搜索.

接下来,输入 =C-s C-s= 可以再次搜索最后一次搜索的字符.

按下 =M-e= 可以编辑要搜索的字符串. 让我们删掉minibuffer中的“lisp”,输入"mode",再按下回车开始新的搜索.

[[https://emacs-doctor.com/img/2016-11-07-emacs-search-mode.png]]

再次按下 =M-p=,你会发现光标回到minibuffer,而你可以通过 =M-p= 和 =M-n= 来遍历之前搜索过的字符串,然后按下回车后就能够再次搜索这个字符串了.

现在让我们再一次输入 =M-<= 回到Info buffer的起始位置.

按下 =C-s= 开始新一轮的查找.

这一次我们输入 =C-q C-j= 来查数换行符.

这里 =C-q= 用来取消 =C-j= 或者说回车的特殊意义,而将它看成普通字符来看待: 如果你不输入 =C-q=, 而直接按下 =C-j=,则会直接退出搜索提示窗口.

我们按下 =C-g= 取消这次搜索.

接下来,我们用 =C-s= 来搜索mail.

注意到 “Mail” 与 “mail” 都会被搜索出来: 搜索是不区分大小写的.

按下 =C-u C-SPC= 可以跳回到你搜索前的位置.

在搜索的过程中,你随时可以通过按下 =M-c= (或者 =M-s c=) 来切换是否大小写敏感: 你会发现,按一下之后,只有“mail”高亮了.

在搜索过程中, 按下 =M-s SPC= 可以切换是否“宽松地匹配空格”: 所谓宽松地匹配空格,是指当你搜索类似“mail   client”(间隔3个空格)字符串时,依然能够匹配字符串“mail client”.

[[https://emacs-doctor.com/img/2016-11-07-emacs-search-loosely.png]]

在搜索过程中,还可以按下 =M-s w= 开启单词搜索. 这时搜索"mail"并不会匹配“email”.

现在尝试搜索一下 =maii=,会发现查找不到符合条件的内容,接下来按下 =DEL= 删除最后那个字符.

让我们再次搜索“mail”.

按下回车,定位到第一次出现mail的位置然后按下 =M-b= 回退一个单词的位置.

接下来按下 =C-s C-w= 搜索光标处的单词(此时应该是“mail”).

让我们再试试按下 =C-s C-w C-w= 会发现可以搜索光标处的多个单词.

Hit C-s C-M-y to search for the character at point.

Hit C-M-y C-M-y to add the next two characters to the search string.

Hit C-M-w to remove the last character from the search string.

Exit the search with C-g.

Info buffers are read-only by default: hit M-d on a word to copy it. In normal
buffers, you would use C-M-SPC to mark the “sexp” under cursor (here, the
“sexp” is simply a word), then M-w to copy it (i.e. to “add it to the
kill-ring).

Now hit C-s again, then C-y to paste (i.e. “yank”) the text in the search
area.

Hit C-s C-M-i. This will displays a new window with a list of possible
completions for the current search string.

[[https://emacs-doctor.com/img/2016-11-07-emacs-search-completion.png]]

Hit M-< and C-s to search for “mail”.

Now hit M-s o to list lines where “mail” occurs.

[[https://emacs-doctor.com/img/2016-11-07-emacs-search-occur.png]]

Hit C-s and M-r (or M-s r) to switch to regular expression search.

Go to an org-mode buffer. Hit M-TAB to cycle through visibility status and
stop when in the OVERVIEW mode (everything is folded).

Search for hidden text: the matched string is automatically unfolded when the
cursor moves to it.

Exit the search.

Still in this org-mode buffer, hit M-TAB to fold the subtrees and hit C-s M-s
i to search for visible text only. Invisible text won’t be matched.

In any buffer, hit C-s C-h b to browse the search options.

Things I wish I knew sooner:

+ C-s M-e to edit the search string
+ C-s M-w to search for word at point
+ C-s M-r to toggle search by regular expressions
+ C-s M-s o to run occur on the current search string
+ C-s C-M-i to complete the current search string

Enjoy, and check the [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Incremental-Search.html][Emacs manual]] for more.

And you, what are your Emacs search “ahah!” moment?

Thank [[https://www.reddit.com/r/emacs/comments/5bkp0g/tutorial_introduction_to_searching_in_emacs/d9pdd0x/][martijntje]] for his suggestions.

If you need help with GNU Emacs, see [[https://emacs-doctor.com/emacs-training][this page]].
